<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="AttendanceProâ„¢ - Change Your Account Password" />
  <title>Change Password | AttendanceProâ„¢ Management System</title>
  <link rel="stylesheet" href="/styles.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
</head>

<body>
  <div class="container">
    <div class="app-header">
      <h1>âœ¨ ATTENDANCE PROâ„¢ MANAGEMENT SYSTEM</h1>
      <p
        style="color: rgba(255,255,255,0.9); margin-top: 10px; font-size: 1rem; font-weight: 500; letter-spacing: 1px;">
        BY PALLAV PRADHAN | VERSION 3.0</p>
    </div>

    <div class="login-card">
      <div class="login-header">
        <div class="login-icon">ğŸ”</div>
        <h2>Change Password</h2>
        <p style="color: #64748b; font-size: 1rem; margin-top: 8px;">Update your account credentials securely</p>
      </div>

      <% if (typeof message !=='undefined' && message) { %>
        <p class="info">âœ… <%= message %>
        </p>
        <% } %>
          <% if (typeof error !=='undefined' && error) { %>
            <p class="error">âŒ <%= error %>
            </p>
            <% } %>

              <form method="post" action="/change-password" id="changePasswordForm">
                <div class="form-group">
                  <label for="currentPassword">
                    <span style="display: flex; align-items: center; gap: 8px;">
                      ğŸ”‘ Current Password
                    </span>
                  </label>
                  <input type="password" id="currentPassword" name="currentPassword" class="form-input"
                    placeholder="Enter your current password" required autofocus />
                </div>

                <div class="form-group">
                  <label for="newPassword">
                    <span style="display: flex; align-items: center; gap: 8px;">
                      ğŸ†• New Password
                    </span>
                  </label>
                  <input type="password" id="newPassword" name="newPassword" class="form-input"
                    placeholder="Enter new password (min. 6 characters)" required minlength="6" />
                </div>

                <div class="form-group">
                  <label for="confirmPassword">
                    <span style="display: flex; align-items: center; gap: 8px;">
                      âœ… Confirm New Password
                    </span>
                  </label>
                  <input type="password" id="confirmPassword" name="confirmPassword" class="form-input"
                    placeholder="Confirm your new password" required minlength="6" />
                </div>

                <button type="submit" class="login-btn" id="submitBtn">
                  <span
                    style="position: relative; z-index: 1; display: flex; align-items: center; justify-content: center; gap: 10px;">
                    ğŸ”„ Update Password
                  </span>
                </button>
              </form>

              <div class="forgot-password">
                <a
                  href="<%= user && user.role === 'admin' ? '/admin' : user && user.role === 'teacher' ? '/teacher' : '/student' %>">
                  â† Back to Dashboard
                </a>
              </div>

              <div style="margin-top: 30px; padding-top: 25px; border-top: 1px solid #e2e8f0; text-align: center;">
                <p style="color: #94a3b8; font-size: 0.85rem; margin: 0;">
                  ğŸ”’ Your password is encrypted using enterprise-grade security
                </p>
              </div>
    </div>

    <div class="app-footer">
      <div style="display: flex; flex-direction: column; gap: 8px; align-items: center;">
        <span style="font-size: 1.1rem;">ğŸ« AttendanceProâ„¢ Management System</span>
        <span style="opacity: 0.7; font-size: 0.85rem;">Designed for Teacher Pallavi Pradhan | Â© 2026 All Rights
          Reserved</span>
      </div>
    </div>
  </div>

  <script>
    // Form validation and loading state
    document.getElementById('changePasswordForm').addEventListener('submit', function (e) {
      const newPass = document.getElementById('newPassword').value;
      const confirmPass = document.getElementById('confirmPassword').value;

      if (newPass !== confirmPass) {
        e.preventDefault();
        alert('âŒ New passwords do not match. Please try again.');
        return false;
      }

      const btn = document.getElementById('submitBtn');
      btn.innerHTML = '<span style="position: relative; z-index: 1; display: flex; align-items: center; justify-content: center; gap: 10px;">â³ Updating...</span>';
      btn.disabled = true;
    });
  </script>
</body>

</html>